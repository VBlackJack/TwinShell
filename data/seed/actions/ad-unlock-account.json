{
  "id": "ad-unlock-account",
  "title": "D√©verrouiller un compte utilisateur AD",
  "description": "D√©verrouille un compte utilisateur qui a √©t√© verrouill√© suite √† des tentatives de connexion √©chou√©es.",
  "category": "üè¢ Active Directory & GPO",
  "platform": 0,
  "level": 1,
  "tags": [
    "ad",
    "unlock",
    "account",
    "user"
  ],
  "windowsCommandTemplateId": "ad-unlock-account-cmd",
  "windowsCommandTemplate": {
    "id": "ad-unlock-account-cmd",
    "platform": 0,
    "name": "Unlock-ADAccount",
    "commandPattern": "Unlock-ADAccount -Identity {username}",
    "parameters": [
      {
        "name": "username",
        "label": "Nom d'utilisateur",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "SamAccountName de l'utilisateur √† d√©verrouiller"
      }
    ]
  },
  "examples": [
    {
      "command": "Unlock-ADAccount -Identity jdupont",
      "description": "D√©verrouille imm√©diatement le compte de jdupont. Le param√®tre -Identity accepte le SamAccountName, Distinguished Name, GUID ou SID. Le d√©verrouillage est instantan√© et permet √† l'utilisateur de se reconnecter imm√©diatement.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {LockedOut -eq $true} | Unlock-ADAccount",
      "description": "D√©verrouille automatiquement TOUS les comptes verrouill√©s du domaine via pipeline. Attention : √† utiliser avec pr√©caution car certains comptes peuvent √™tre verrouill√©s pour des raisons de s√©curit√© (tentatives d'intrusion). V√©rifiez toujours les logs avant un d√©verrouillage massif.",
      "platform": 0
    },
    {
      "command": "Unlock-ADAccount -Identity jdupont -Confirm:$false",
      "description": "D√©verrouille sans demander de confirmation. Le param√®tre -Confirm:$false supprime l'invite de confirmation (utile pour les scripts automatis√©s). Par d√©faut, Unlock-ADAccount ne demande pas de confirmation, mais ce switch est utile si une politique organisationnelle force les confirmations.",
      "platform": 0
    },
    {
      "command": "Get-ADUser jdupont -Properties LockedOut,LockoutTime | Select-Object Name,LockedOut,LockoutTime",
      "description": "V√©rifie l'√©tat de verrouillage d'un compte avant de le d√©verrouiller. La propri√©t√© LockedOut indique si le compte est verrouill√© ($true/$false). LockoutTime affiche l'heure exacte du verrouillage. Toujours v√©rifier ces informations avant de d√©verrouiller pour comprendre la cause du verrouillage.",
      "platform": 0
    },
    {
      "command": "Unlock-ADAccount -Identity 'CN=Jean Dupont,OU=Users,DC=contoso,DC=com'",
      "description": "D√©verrouille un compte en utilisant son Distinguished Name (DN) complet. Cette syntaxe est utile quand vous travaillez avec des scripts qui manipulent des objets AD complets ou quand le SamAccountName n'est pas unique.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {LockedOut -eq $true} -Properties LockedOut,LockoutTime | Select-Object Name,SamAccountName,LockedOut,LockoutTime | Export-Csv C:\\Temp\\LockedAccounts.csv -NoTypeInformation",
      "description": "Exporte la liste de tous les comptes verrouill√©s avec l'heure de verrouillage. Utile pour les audits de s√©curit√©, l'analyse des patterns de verrouillage et l'identification de potentielles attaques par force brute. Conservez ces rapports pour la tra√ßabilit√©.",
      "platform": 0
    },
    {
      "command": "Unlock-ADAccount -Identity jdupont -PassThru | Select-Object Name,LockedOut",
      "description": "D√©verrouille et affiche imm√©diatement le statut final du compte. Le switch -PassThru force la cmdlet √† retourner l'objet utilisateur modifi√© dans le pipeline, permettant de v√©rifier que le d√©verrouillage a bien fonctionn√©. Essentiel pour les scripts avec gestion d'erreurs.",
      "platform": 0
    }
  ],
  "notes": "N√©cessite des droits d'administration AD. V√©rifier la cause du verrouillage avant de d√©verrouiller.",
  "links": []
}