{
  "id": "ad-reset-computer-password",
  "title": "R√©initialiser le mot de passe d'un compte ordinateur",
  "description": "R√©initialise le mot de passe du compte ordinateur dans Active Directory.",
  "category": "üè¢ Active Directory & GPO",
  "platform": 0,
  "level": 1,
  "tags": [
    "ad",
    "computer",
    "password",
    "reset"
  ],
  "windowsCommandTemplateId": "ad-reset-computer-password-cmd",
  "windowsCommandTemplate": {
    "id": "ad-reset-computer-password-cmd",
    "platform": 0,
    "name": "Reset-ComputerMachinePassword",
    "commandPattern": "Reset-ComputerMachinePassword -Server {dcName}",
    "parameters": [
      {
        "name": "dcName",
        "label": "Nom du contr√¥leur de domaine",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "Nom du DC √† contacter"
      }
    ]
  },
  "examples": [
    {
      "command": "ss -tulpn",
      "description": "üî• STANDARD LINUX : Liste tous les ports TCP/UDP en √©coute (-tul) avec les processus associ√©s (-p) et sans r√©solution DNS (-n). La commande de r√©f√©rence pour savoir 'qui √©coute sur ce port'.",
      "platform": 1
    },
    {
      "command": "ss -s",
      "description": "R√©sum√© statistique rapide des sockets (Total, TCP, UDP). Utile pour d√©tecter une saturation de sockets ou une attaque DDoS.",
      "platform": 1
    },
    {
      "command": "Set-ADAccountPassword -Identity jdupont -Reset -NewPassword (ConvertTo-SecureString -AsPlainText \"P@ssw0rd123!\" -Force)",
      "description": "R√©initialise le mot de passe de jdupont avec un nouveau mot de passe temporaire. ConvertTo-SecureString convertit le texte clair en SecureString (obligatoire pour les mots de passe). Le param√®tre -Force supprime l'avertissement de s√©curit√©. ATTENTION : le mot de passe doit respecter la politique de complexit√© du domaine.",
      "platform": 0
    },
    {
      "command": "$SecurePassword = Read-Host -AsSecureString -Prompt 'Nouveau mot de passe'; Set-ADAccountPassword -Identity jdupont -Reset -NewPassword $SecurePassword",
      "description": "M√©thode s√©curis√©e : demande interactivement le mot de passe sans l'afficher √† l'√©cran. Read-Host -AsSecureString masque la saisie (affiche des ast√©risques). Cette approche est plus s√©curis√©e car le mot de passe n'appara√Æt jamais en clair dans l'historique PowerShell ou les logs. Recommand√©e pour les r√©initialisations manuelles.",
      "platform": 0
    },
    {
      "command": "Set-ADAccountPassword -Identity jdupont -Reset -NewPassword (ConvertTo-SecureString 'TempP@ss2024!' -AsPlainText -Force) -PassThru | Set-ADUser -ChangePasswordAtLogon $true",
      "description": "R√©initialise le mot de passe ET force l'utilisateur √† le changer √† la prochaine connexion. Le switch -PassThru passe l'objet utilisateur au pipeline. Set-ADUser -ChangePasswordAtLogon $true active le flag de changement obligatoire. C'est la m√©thode recommand√©e pour les r√©initialisations : l'admin d√©finit un mot de passe temporaire, l'utilisateur le change imm√©diatement.",
      "platform": 0
    },
    {
      "command": "Set-ADAccountPassword -Identity jdupont -OldPassword (ConvertTo-SecureString 'OldP@ss' -AsPlainText -Force) -NewPassword (ConvertTo-SecureString 'NewP@ss123!' -AsPlainText -Force)",
      "description": "Change le mot de passe en connaissant l'ancien (sans droits admin). Utilisez -OldPassword quand l'utilisateur change son propre mot de passe ou quand la politique exige la connaissance de l'ancien. Sans -Reset, cette commande n√©cessite les droits de l'utilisateur concern√© mais pas de droits admin.",
      "platform": 0
    },
    {
      "command": "Set-ADAccountPassword -Identity jdupont -Reset -NewPassword (ConvertTo-SecureString 'P@ssw0rd!' -AsPlainText -Force) -Server DC01.contoso.com",
      "description": "R√©initialise le mot de passe sur un contr√¥leur de domaine sp√©cifique. Le param√®tre -Server force l'ex√©cution sur le DC nomm√©. Utile dans les environnements multi-sites pour garantir la r√©plication imm√©diate ou lors du troubleshooting de probl√®mes de r√©plication.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {PasswordExpired -eq $true} | Select-Object Name,SamAccountName,PasswordExpired,PasswordLastSet",
      "description": "Liste tous les utilisateurs dont le mot de passe a expir√©. PasswordExpired indique si le mot de passe est p√©rim√© selon la politique du domaine. PasswordLastSet affiche la date du dernier changement. Utile pour identifier les comptes n√©cessitant une r√©initialisation et pour les audits de conformit√©.",
      "platform": 0
    },
    {
      "command": "Set-ADUser -Identity jdupont -PasswordNeverExpires $true",
      "description": "Configure le compte pour que le mot de passe n'expire jamais. ATTENTION : cette commande viole g√©n√©ralement les politiques de s√©curit√© et ne devrait √™tre utilis√©e que pour des comptes de service sp√©cifiques. Documentez toujours la raison et obtenez une validation.",
      "platform": 0
    }
  ],
  "notes": "√Ä ex√©cuter sur l'ordinateur concern√©. R√©sout les probl√®mes de relation de confiance avec le domaine.",
  "links": [
    {
      "title": "Documentation Reset-ComputerMachinePassword",
      "url": "https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/reset-computermachinepassword"
    }
  ]
}