{
  "id": "ad-add-user-to-group",
  "title": "Ajouter un utilisateur √† un groupe AD",
  "description": "Ajoute un utilisateur comme membre d'un groupe Active Directory.",
  "category": "üè¢ Active Directory & GPO",
  "platform": 0,
  "level": 1,
  "tags": [
    "ad",
    "group",
    "membership",
    "user"
  ],
  "windowsCommandTemplateId": "ad-add-user-to-group-cmd",
  "windowsCommandTemplate": {
    "id": "ad-add-user-to-group-cmd",
    "platform": 0,
    "name": "Add-ADGroupMember",
    "commandPattern": "Add-ADGroupMember -Identity \"{groupName}\" -Members {username}",
    "parameters": [
      {
        "name": "groupName",
        "label": "Nom du groupe",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "Nom du groupe AD"
      },
      {
        "name": "username",
        "label": "Nom d'utilisateur",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "SamAccountName de l'utilisateur √† ajouter"
      }
    ]
  },
  "examples": [
    {
      "command": "Add-ADGroupMember -Identity 'Domain Admins' -Members jdupont",
      "description": "Ajoute jdupont au groupe Domain Admins. -Identity sp√©cifie le groupe cible. -Members peut √™tre un SamAccountName, DN, GUID ou SID. L'ajout est imm√©diat mais l'utilisateur doit se reconnecter pour que les nouveaux droits soient actifs.",
      "platform": 0
    },
    {
      "command": "Add-ADGroupMember -Identity 'IT_Support' -Members jdupont,mmartin,ldubois",
      "description": "Ajoute plusieurs utilisateurs simultan√©ment au groupe. -Members accepte un tableau de valeurs s√©par√©es par des virgules. Beaucoup plus efficace que des commandes individuelles : un seul appel AD au lieu de trois.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {Department -eq 'IT'} | ForEach-Object {Add-ADGroupMember -Identity 'IT_All_Users' -Members $_.SamAccountName}",
      "description": "Ajoute automatiquement tous les utilisateurs du d√©partement IT √† un groupe. ForEach-Object it√®re sur chaque r√©sultat. $_.SamAccountName r√©cup√®re l'identifiant de chaque utilisateur. Utile pour les ajouts de masse lors de r√©organisations.",
      "platform": 0
    },
    {
      "command": "Add-ADGroupMember -Identity 'IT_Support' -Members jdupont -Confirm:$false",
      "description": "Ajoute au groupe sans demander de confirmation. -Confirm:$false supprime l'invite. Par d√©faut Add-ADGroupMember ne demande pas de confirmation, mais ce switch est utile si une politique force les confirmations.",
      "platform": 0
    },
    {
      "command": "Add-ADGroupMember -Identity 'Groupe_Projets' -Members (Get-ADGroup 'IT_Team').DistinguishedName",
      "description": "Ajoute un groupe entier comme membre d'un autre groupe (imbrication). Get-ADGroup r√©cup√®re l'objet groupe source. L'imbrication permet une gestion hi√©rarchique : modifier IT_Team impacte automatiquement Groupe_Projets.",
      "platform": 0
    },
    {
      "command": "Get-ADGroupMember -Identity 'IT_Support' | Select-Object Name,SamAccountName; Add-ADGroupMember -Identity 'IT_Support' -Members jdupont -WhatIf",
      "description": "Affiche d'abord les membres actuels du groupe, puis simule l'ajout avec -WhatIf. Cette approche prudente permet de v√©rifier que l'utilisateur n'est pas d√©j√† membre avant l'ajout. Retirez -WhatIf apr√®s v√©rification pour ex√©cuter r√©ellement.",
      "platform": 0
    }
  ],
  "notes": "N√©cessite des droits d'administration AD. Les permissions du groupe s'appliquent imm√©diatement.",
  "links": [
    {
      "title": "Documentation Add-ADGroupMember",
      "url": "https://learn.microsoft.com/en-us/powershell/module/activedirectory/add-adgroupmember"
    }
  ]
}