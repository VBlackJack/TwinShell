{
  "id": "ad-disable-account",
  "title": "D√©sactiver un compte utilisateur AD",
  "description": "D√©sactive un compte utilisateur Active Directory sans le supprimer.",
  "category": "üè¢ Active Directory & GPO",
  "platform": 0,
  "level": 2,
  "tags": [
    "ad",
    "disable",
    "account",
    "user"
  ],
  "windowsCommandTemplateId": "ad-disable-account-cmd",
  "windowsCommandTemplate": {
    "id": "ad-disable-account-cmd",
    "platform": 0,
    "name": "Disable-ADAccount",
    "commandPattern": "Disable-ADAccount -Identity {username}",
    "parameters": [
      {
        "name": "username",
        "label": "Nom d'utilisateur",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "SamAccountName de l'utilisateur √† d√©sactiver"
      }
    ]
  },
  "examples": [
    {
      "command": "Disable-ADAccount -Identity jdupont",
      "description": "D√©sactive imm√©diatement le compte de jdupont. L'utilisateur ne pourra plus se connecter mais le compte et toutes ses donn√©es restent dans AD. La d√©sactivation est r√©versible avec Enable-ADAccount. M√©thode recommand√©e pour les d√©parts temporaires (cong√©s longs, suspensions).",
      "platform": 0
    },
    {
      "command": "Disable-ADAccount -Identity jdupont -Confirm:$false",
      "description": "D√©sactive le compte sans demander de confirmation. Le param√®tre -Confirm:$false supprime l'invite (utile pour les scripts automatis√©s). Utilisez avec pr√©caution : la d√©sactivation est imm√©diate et peut d√©connecter l'utilisateur de toutes ses sessions actives.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {Enabled -eq $true -and LastLogonDate -lt (Get-Date).AddDays(-180)} -Properties LastLogonDate | Disable-ADAccount -WhatIf",
      "description": "Simulation de d√©sactivation des comptes inactifs depuis 180 jours. Le switch -WhatIf affiche ce qui serait fait SANS ex√©cuter l'action (mode dry-run). Indispensable avant toute action de masse pour √©viter les erreurs. Retirez -WhatIf apr√®s v√©rification pour ex√©cuter r√©ellement.",
      "platform": 0
    },
    {
      "command": "Get-ADUser jdupont -Properties Enabled | Select-Object Name,Enabled,SamAccountName",
      "description": "V√©rifie si un compte est actif ou d√©sactiv√©. La propri√©t√© Enabled vaut $true (actif) ou $false (d√©sactiv√©). Toujours v√©rifier l'√©tat avant de d√©sactiver ou r√©activer. Utile aussi pour les scripts de reporting et les tableaux de bord.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter {Department -eq 'Finance' -and Enabled -eq $true} | Select-Object Name,SamAccountName | Export-Csv C:\\Temp\\FinanceUsersBeforeDisable.csv -NoTypeInformation; Get-ADUser -Filter {Department -eq 'Finance'} | Disable-ADAccount",
      "description": "D√©sactivation massive avec sauvegarde pr√©alable : exporte d'abord la liste des utilisateurs Finance actifs, puis les d√©sactive tous. La sauvegarde CSV permet une restauration en cas d'erreur. Les deux commandes sont s√©par√©es par un point-virgule pour ex√©cution s√©quentielle. Toujours faire une sauvegarde avant une op√©ration de masse.",
      "platform": 0
    },
    {
      "command": "Get-ADUser -Filter * -Properties Enabled,LastLogonDate | Where-Object {$_.Enabled -eq $false} | Select-Object Name,SamAccountName,Enabled,LastLogonDate | Export-Csv C:\\Temp\\DisabledAccounts.csv -NoTypeInformation",
      "description": "Exporte un rapport complet de tous les comptes d√©sactiv√©s avec leur derni√®re connexion. Utile pour les audits de s√©curit√©, l'analyse des comptes dormants et la pr√©paration au nettoyage de l'AD. Effectuez ce rapport trimestriellement pour maintenir un AD propre.",
      "platform": 0
    }
  ],
  "notes": "L'utilisateur ne pourra plus se connecter. Le compte peut √™tre r√©activ√© avec Enable-ADAccount.",
  "links": []
}