{
  "id": "dns-query-record",
  "title": "Interroger un enregistrement DNS",
  "description": "Effectue une requ√™te DNS pour r√©soudre un nom de domaine ou interroger un type d'enregistrement sp√©cifique.",
  "category": "üåê Network & DNS",
  "platform": 2,
  "level": 0,
  "tags": [
    "dns",
    "query",
    "nslookup",
    "diagnostic"
  ],
  "windowsCommandTemplateId": "dns-query-record-windows-cmd",
  "windowsCommandTemplate": {
    "id": "dns-query-record-windows-cmd",
    "platform": 0,
    "name": "Resolve-DnsName",
    "commandPattern": "Resolve-DnsName -Name {domainName} -Type {recordType}",
    "parameters": [
      {
        "name": "domainName",
        "label": "Nom de domaine",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "Le nom de domaine √† interroger"
      },
      {
        "name": "recordType",
        "label": "Type d'enregistrement",
        "type": "string",
        "defaultValue": "A",
        "required": false,
        "description": "Type d'enregistrement DNS (A, AAAA, MX, TXT, etc.)"
      }
    ]
  },
  "linuxCommandTemplateId": "dns-query-record-linux-cmd",
  "linuxCommandTemplate": {
    "id": "dns-query-record-linux-cmd",
    "platform": 1,
    "name": "dig",
    "commandPattern": "dig {domainName} {recordType}",
    "parameters": [
      {
        "name": "domainName",
        "label": "Nom de domaine",
        "type": "string",
        "defaultValue": "",
        "required": true,
        "description": "Le nom de domaine √† interroger"
      },
      {
        "name": "recordType",
        "label": "Type d'enregistrement",
        "type": "string",
        "defaultValue": "A",
        "required": false,
        "description": "Type d'enregistrement DNS (A, AAAA, MX, TXT, etc.)"
      }
    ]
  },
  "examples": [],
  "notes": "Sur Linux, installer bind-utils pour utiliser dig. Alternative : nslookup disponible sur les deux plateformes.",
  "links": [],
  "windowsExamples": [
    {
      "command": "Resolve-DnsName google.com",
      "description": "R√©sout le nom de domaine google.com en adresse(s) IP. √âquivalent PowerShell de 'nslookup'. Retourne tous les enregistrements A (IPv4) et AAAA (IPv6) associ√©s. Utilise le serveur DNS configur√© sur la machine.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName google.com -Type MX",
      "description": "Interroge les enregistrements MX (Mail eXchange) de google.com. Les enregistrements MX indiquent les serveurs de messagerie responsables du domaine. Retourne les serveurs mail avec leur priorit√©. Essentiel pour diagnostiquer les probl√®mes d'email et v√©rifier les configurations SMTP.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName contoso.com -Type ALL -Server 8.8.8.8",
      "description": "Interroge TOUS les types d'enregistrements DNS (A, AAAA, MX, TXT, NS, SOA, etc.) en utilisant le serveur DNS public de Google (8.8.8.8). -Type ALL retourne absolument tous les enregistrements disponibles. -Server force l'utilisation d'un DNS sp√©cifique au lieu du DNS local. Utile pour comparer les r√©solutions ou diagnostiquer des probl√®mes de propagation DNS.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName _spf.google.com -Type TXT",
      "description": "Interroge les enregistrements TXT, souvent utilis√©s pour SPF (Sender Policy Framework), DKIM, DMARC et v√©rifications de domaine. Les enregistrements TXT contiennent du texte libre utilis√© pour la configuration d'email, la s√©curit√© et les validations de propri√©t√© de domaine.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName 8.8.8.8 -Type PTR",
      "description": "R√©solution DNS inverse (reverse lookup) : cherche le nom de domaine associ√© √† l'IP 8.8.8.8. Les enregistrements PTR mappent IP ‚Üí nom (inverse de A qui mappe nom ‚Üí IP). Utile pour identifier un serveur √† partir de son IP ou v√©rifier la coh√©rence des configurations DNS.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName contoso.com -Type NS",
      "description": "Interroge les enregistrements NS (Name Server) qui indiquent quels serveurs DNS sont autoritaires pour le domaine. Les enregistrements NS d√©finissent o√π sont h√©berg√©es les zones DNS. Essentiel lors de migrations DNS ou pour identifier l'h√©bergeur DNS d'un domaine.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName google.com -DnsOnly",
      "description": "Force une vraie requ√™te DNS en d√©sactivant le cache local. Le switch -DnsOnly ignore compl√®tement le cache de r√©solution Windows et force une interrogation du serveur DNS. Utile pour v√©rifier les changements DNS r√©cents ou diagnostiquer des probl√®mes de cache.",
      "platform": 0
    },
    {
      "command": "Get-Content C:\\domains.txt | ForEach-Object {Resolve-DnsName $_ -ErrorAction SilentlyContinue} | Select-Object Name,IPAddress",
      "description": "R√©sout en masse une liste de domaines depuis un fichier. Get-Content charge le fichier. ForEach-Object r√©sout chaque ligne. -ErrorAction SilentlyContinue ignore les erreurs (domaines inexistants). Select-Object formate les r√©sultats. Id√©al pour valider une liste de domaines ou cr√©er un inventaire DNS.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName -Name <Domain> -Server 8.8.8.8",
      "description": "Force la r√©solution via un serveur externe (Google). Permet de savoir si le probl√®me vient de votre DNS interne ou de la propagation mondiale.",
      "platform": 0
    },
    {
      "command": "Resolve-DnsName -Name <Domain> -Type TXT",
      "description": "V√©rifie les enregistrements TXT (souvent utilis√©s pour SPF, DKIM, validation de domaine).",
      "platform": 0
    }
  ],
  "linuxExamples": [
    {
      "command": "dig contoso.com A",
      "description": "Exemple Linux utilisant dig. Remplacez les param√®tres entre <> par vos valeurs.",
      "platform": 1
    }
  ]
}